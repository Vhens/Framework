<%- include("header",{type:'all'}) %>
<div class="container">
  <div class="login">
    <div class="form-group row">
      <label for="username" class="col-sm-2 col-form-label">用户名</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="username" placeholder="用户名">
      </div>
    </div>
    <div class="form-group row">
      <label for="password" class="col-sm-2 col-form-label">密码</label>
      <div class="col-sm-10">
        <input type="password" class="form-control" id="password" placeholder="密码">
      </div>
    </div>
    <div class="form-group row">
      <div class="col-sm-2"></div>
      <div class="col-sm-10">
        <button type="button" class="btn login-btn btn-primary" id="login">登录</button>
      </div>
    </div>
  </div>
</div>
<script>
  $(function(){
    $('#login').on('click', function(){
      let username = $('#username').val();
      let password = $('#password').val();
      $.ajax({
        url: '/login',
        type: 'POST',
        dataType: 'json',
        data: {
          username: username,
          password: password
        },
        beforeSend: function(xhr) {},
        success: function(res) {
          console.log(res);
          if(res.code === 1) {
            location.href = '/home'        
          } else {
            console.error(res.msg);
          }
        },
        complete: function() {},
        error: function (e) {
          console.log(e)
        }
      })
    })
  })
</script>
<% include footer %>